<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Ch√∫c m·ª´ng sinh nh·∫≠t B√∫n</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      background: radial-gradient(circle at center, #ff6699, #330033);
      font-family: 'Comic Sans MS', cursive, sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      height: 100vh;
    }

    h1 {
      font-size: clamp(1.5rem, 5vw, 2.5rem);
      color: #fff;
      text-shadow: 0 0 10px #ff99cc, 0 0 20px #ff6699, 0 0 30px #ff3366;
      animation: glow 2s ease-in-out infinite alternate;
      z-index: 2;
      margin: 10px 0;
      text-align: center;
    }

    h2 {
      font-size: clamp(1.5rem, 5vw, 2.5rem);
      color: #fff;
      text-shadow: 0 0 10px #ff99cc, 0 0 20px #ff6699, 0 0 30px #ff3366;
      animation: glow 2s ease-in-out infinite alternate;
      z-index: 2;
      margin: 10px 0;
      text-align: center;
    }

    @keyframes glow {
      from {
        text-shadow: 0 0 10px #ff99cc, 0 0 20px #ff6699, 0 0 30px #ff3366;
      }
      to {
        text-shadow: 0 0 20px #ff99cc, 0 0 30px #ff6699, 0 0 40px #ff3366, 0 0 50px #ff0033;
      }
    }

    #text-wrapper {
      display: none;
      position: relative;
      overflow: hidden;
      height: 100px; /* ch·ªâ hi·ªÉn th·ªã 1 c√¢u */
      width: 100%;
      max-width: 800px;
      z-index: 2;
    }

    #text-slide {
      position: absolute;
      width: 100%;
      transition: transform 0.8s ease-in-out;
    }

    .line {
      height: 100px;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 1.3rem;
      color: white;
      text-align: center;
    }

    button {
      padding: 10px 20px;
      font-size: 18px;
      background: #ff3366;
      color: #fff;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      z-index: 3;
      margin-top: 20px;
    }
    button:hover {
      background: #ff0033;
    }

    /* Canvas tr√°i tim bay */
    #heartsCanvas {
      position: fixed;
      top: 0;
      left: 0;
      pointer-events: none;
      z-index: 1;
    }

    canvas {
      position: absolute;
      top: 0;
      left: 0;
    }
  </style>
</head>
<body>
  <canvas id="heartsCanvas"></canvas>
  <div style="width: 100%; height: 100%; display: flex; flex-direction: column; justify-content: center; align-items: center;">
    <button id="startBtn">Happy birthday Em b√©</button>

  <h1 style="display:none;" id="title">üéâ Ch√∫c m·ª´ng sinh nh·∫≠t B√∫n üéÇ</h1>

  <div id="text-wrapper">
    <h2 id="text-slide"></h2>
  </div>
</div>

  <audio id="bg-music" src="beautiful-in-white.mp3"></audio> <!-- Thay link nh·∫°c -->

  <!-- Three.js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

  <script>
    const sentences = [
      "Em b√© c·ªßa a ∆°iiiii. Sang tu·ªïi m·ªõi r n√®",
      "Th√™m m·ªôt tu·ªïi th√™m nhi·ªÅu ni·ªÅm vui, nhi·ªÅu h·∫°nh ph√∫c nha e b√©",
      "A s·∫Ω lu√¥n ·ªü c·∫°nh e b√©",
      "E h√£y t·ª± tin l√†m nh·ªØng ƒëi·ªÅu m√¨nh mu·ªën",
      "ƒêi t·ªõi nh·ªØng n∆°i m√¨nh mu·ªën ƒëi",
      "ƒÇng th·∫≠t nhi·ªÅu m√≥n ƒÉng ngong",
      "A y√™u e nhi·ªÅu l·∫Øm ·∫°",
      "Ch√∫c ch√∫ng m√¨nh h·∫°nh ph√∫c b√™n nhau l√¢u th·∫≠t l√† l√¢u ·∫°",
      "Ch·ª•t e xinh c·ªßa a"
    ];

    const textSlide = document.getElementById("text-slide");
    const startBtn = document.getElementById("startBtn");
    const title = document.getElementById("title");
    const music = document.getElementById("bg-music");

    let index = 0;

    // T·∫°o c√°c d√≤ng v√†o slide
    sentences.forEach(s => {
      const line = document.createElement("div");
      line.classList.add("line");
      line.textContent = s;
      textSlide.appendChild(line);
    });

    function startScroll() {
      let total = sentences.length;
      setInterval(() => {
        index = (index + 1) % total;
        textSlide.style.transform = `translateY(-${index * 100}px)`;
      }, 2500);
    }

    startBtn.addEventListener("click", () => {
      music.play();
      startBtn.style.display = "none";
      title.style.display = "block";
      document.getElementById("text-wrapper").style.display = "block";
      startScroll();
    });

    // Three.js heart
    let scene = new THREE.Scene();
    let camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
    let renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
    renderer.setSize(window.innerWidth, window.innerHeight);
    document.body.appendChild(renderer.domElement);

    let x = 0, y = 0;
    let heartShape = new THREE.Shape();
    heartShape.moveTo(x, y);
    heartShape.bezierCurveTo(x, y, x - 0.25, y + 0.25, x - 0.5, y + 0.75);
    heartShape.bezierCurveTo(x - 1, y + 1.5, x - 0.5, y + 2, x, y + 1.5);
    heartShape.bezierCurveTo(x + 0.5, y + 2, x + 1, y + 1.5, x + 0.5, y + 0.75);
    heartShape.bezierCurveTo(x + 0.25, y + 0.25, x, y, x, y);

    let extrudeSettings = { depth: 0.5, bevelEnabled: true, bevelSegments: 5, steps: 2, bevelSize: 0.1, bevelThickness: 0.1 };
    let geometry = new THREE.ExtrudeGeometry(heartShape, extrudeSettings);
    let material = new THREE.MeshPhongMaterial({ color: 0xff3366, shininess: 100 });
    let heart = new THREE.Mesh(geometry, material);
    scene.add(heart);

    let light1 = new THREE.PointLight(0xffffff, 1);
    light1.position.set(5, 5, 5);
    scene.add(light1);
    let light2 = new THREE.AmbientLight(0xff6699, 0.6);
    scene.add(light2);

    camera.position.z = 5;

    let clock = new THREE.Clock();
    function animate() {
      requestAnimationFrame(animate);
      let scale = 1 + 0.1 * Math.sin(clock.getElapsedTime() * 5);
      heart.scale.set(scale, scale, scale);
      heart.rotation.y += 0.01;
      renderer.render(scene, camera);
    }
    animate();

    window.addEventListener('resize', () => {
      camera.aspect = window.innerWidth / window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
      resizeHeartsCanvas();
    });

    // Hi·ªáu ·ª©ng tr√°i tim nh·ªè bay
    const heartsCanvas = document.getElementById("heartsCanvas");
    const ctx = heartsCanvas.getContext("2d");

    function resizeHeartsCanvas() {
      heartsCanvas.width = window.innerWidth;
      heartsCanvas.height = window.innerHeight;
    }
    resizeHeartsCanvas();

    const hearts = [];
    function createHeart() {
      return {
        x: Math.random() * heartsCanvas.width,
        y: heartsCanvas.height + 20,
        size: Math.random() * 20 + 10,
        speed: Math.random() * 1.5 + 0.5,
        opacity: Math.random() * 0.5 + 0.5
      };
    }

    function drawHeart(h) {
      ctx.save();
      ctx.translate(h.x, h.y);
      ctx.scale(h.size / 20, h.size / 20);
      ctx.beginPath();
      ctx.moveTo(0, -10);
      ctx.bezierCurveTo(-10, -20, -20, 0, 0, 10);
      ctx.bezierCurveTo(20, 0, 10, -20, 0, -10);
      ctx.closePath();
      ctx.fillStyle = `rgba(255, 105, 180, ${h.opacity})`;
      ctx.fill();
      ctx.restore();
    }

    function animateHearts() {
      ctx.clearRect(0, 0, heartsCanvas.width, heartsCanvas.height);

      if (Math.random() < 0.1) {
        hearts.push(createHeart());
      }

      hearts.forEach((h, i) => {
        h.y -= h.speed;
        if (h.y < -20) hearts.splice(i, 1);
        drawHeart(h);
      });

      requestAnimationFrame(animateHearts);
    }

    animateHearts();
  </script>
</body>
</html>
